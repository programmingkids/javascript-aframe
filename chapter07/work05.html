<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>work05</title>
<script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
<script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
<script>
// ランダムにカラーコードを生成する関数
// 例えば「#aabbcc」みたいな6桁のカラーコード
function getRandomColor() {
    var letters = "0123456789abcdef";
    var randomColor = ""; 
    for (var i = 0; i < 6; i++) {
        randomColor += letters[Math.floor(Math.random() * 16)];
    }
    return "#" + randomColor;
}

// min以上、max以下の範囲で、ランダムな整数を返す関数
function getRandomRange(min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min);
}

// scene object
var scene;

window.onload = init;

function generateBox() {
    // create box
    var box = document.createElement("a-box");
    // set color
    box.setAttribute("color","#cccccc");
    // set transparency
    box.setAttribute("transparent",true);
    // set random opacity
    var opacity = getRandomRange(1, 9) / 10;
    box.setAttribute("opacity",opacity);

    // set random position
    var position_x = getRandomRange(-10, 10);
    var position_y = getRandomRange(-5, 0);
    var position_z = getRandomRange(-20, 5);
    var position = position_x + " " + position_y + " " + position_z;
    box.setAttribute("position", position);

    // set random scale
    var scale_x = getRandomRange(2, 5);
    var scale_y = getRandomRange(2, 5);
    var scale_z = getRandomRange(2, 5);
    var scale = scale_x + " " + scale_y + " " + scale_z;
    box.setAttribute("scale",scale);
    
    // add box to scene
    scene.appendChild(box);
}

function init() {
    // get scene
    scene = document.querySelector("a-scene");
    
    // create boxes
    for( var i = 0; i < 50; i++ ) {
        generateBox();
    }
}
</script>
</head>
<body>
<a-scene>
    <a-sky color="#5a6fa8"></a-sky>
    <!-- snow particle-->
    <a-entity 
        position="0 10 -10" 
        particle-system="
            preset: snow;
            size: 1.5;
            particleCount: 2000;"></a-entity>
</a-scene>
</body>
</html>
